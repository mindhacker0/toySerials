<html>
    <head>
        <style>
            .item{
                display: inline-block;
                text-align: center;
                width:50px;
                height: 50px;
                line-height: 50px;
            }
            .pass{
                background:paleturquoise;
            }
        </style>
    </head>
    <body>
        <div id="root"></div>
        <script>
            let testArr = [["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]];
            let testStr = "ABCCED";
            function renderToDom(arr){
                let wrap = document.createDocumentFragment();
                for(let i in arr){
                    let row = document.createElement("div");
                    row.classList.add("row");
                    for(let j in arr[i]){
                       let elem = document.createElement("div");
                       elem.classList.add("item");
                       elem.innerText = arr[i][j];
                       row.appendChild(elem);
                    }
                    wrap.appendChild(row);
                }
                document.getElementById("root").appendChild(wrap);
            }
            function sleep(time){
                return new Promise((resolve,reject)=>{
                    setTimeout(resolve,time);
                });
            }
            var exist =async function(board, word) {
                let stack = [[0,0,0,false]];
                let map = new Map;
                let hasFind = false;
                function findPath(x,y,findIndex,hasRight){
                    if(x<0||x>2||y<0||y>3) return;
                    if(!map.get(`${x},${y}`) || hasRight){
                        document.querySelectorAll(".row")[x].querySelectorAll(".item")[y].classList.add("pass");
                        if(board[x][y] === word[findIndex]){//找到匹配的了
                            findIndex++;
                            if(findIndex === word.length){
                                hasFind = true;
                                console.log("find");
                            }
                            hasRight = true;
                        }else{
                            hasRight = false;
                            findIndex = 0;
                        }
                        stack.push([x+1,y,findIndex,hasRight]);
                        stack.push([x,y+1,findIndex,hasRight]);
                        stack.push([x-1,y,findIndex,hasRight]);
                        stack.push([x,y-1,findIndex,hasRight]);
                        map.set(`${x},${y}`,true);
                    }
                }
                while(stack.length>0){
                    let [x,y,findIndex,hasRight] = stack.shift();
                    findPath(x,y,findIndex,hasRight);
                    await sleep(100);
                }
                return hasFind;
            };
            renderToDom(testArr);
            exist(testArr,testStr);
        </script>
    </body>
</html>